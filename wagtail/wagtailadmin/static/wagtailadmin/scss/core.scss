@import "wagtailadmin/scss/variables.scss";
@import "wagtailadmin/scss/mixins.scss";
@import "wagtailadmin/scss/grid.scss";

@import "wagtailadmin/scss/components/explorer.scss";
@import "wagtailadmin/scss/components/icons.scss";
@import "wagtailadmin/scss/components/typography.scss";
@import "wagtailadmin/scss/components/tabs.scss";
@import "wagtailadmin/scss/components/dropdowns.scss";
@import "wagtailadmin/scss/components/modals.scss";
@import "wagtailadmin/scss/components/forms.scss";
@import "wagtailadmin/scss/components/listing.scss";
@import "wagtailadmin/scss/components/messages.scss";
@import "wagtailadmin/scss/components/formatters.scss";
@import "wagtailadmin/scss/components/header.scss";
@import "wagtailadmin/scss/components/progressbar.scss";
@import "wagtailadmin/scss/components/datetimepicker.scss";
@import "wagtailadmin/scss/components/main-nav.scss";

@import "fonts.scss";

html{
    background:$color-grey-4;
    height:100%;
}

body{
    -webkit-font-smoothing: antialiased; /* Do not remove! */
    font-family:Open Sans,Arial,sans-serif;
    font-size:80%;
    line-height:1.5em;
    color:$color-text-base;
    overflow-x: hidden;
    position: relative;

    &.reordering{
        overflow:visible;
    }
}

.capabilitymessage{
    display:block;
    background-color:$color-red;
    color:white;
    padding:1em 2em;
    margin:0;
    position:relative;
    width:100%;
    text-align:center;

    a{
        color:white;
        text-decoration:underline;
    }
}

.wrapper{
    @include transition-transform(0.2s ease);
    @include clearfix();
}

.nav-wrapper{
    /* See components/main-nav.scss */
}


.logo{
    display:block;
    margin:2em auto;
    text-align:left;
    text-decoration:none;
    color: #AAA;
    padding: 0.9em 1.2em;
    margin:0;
    -webkit-font-smoothing: auto;

    img{
        width:20px;
        float:left;
        border:0;
        margin-right:1em;
    }
}

.content-wrapper{
    width:100%;
    height:100%; /* this has no effect on desktop, but on mobile it helps aesthetics of menu popout action */
    float: left;
    position: relative;
    background-color:$color-grey-4;
    border-bottom:1px solid $color-grey-3;
}
    .content{
        @include row();
        background:white;
        border-top:0px solid $color-grey-5; /* this top border provides space for the floating logo to toggle the menu */
        padding-bottom:4em;
        position:relative; /* yuk. necessary for positions for jquery ui widgets */
    }

footer{
    @include transition(all 0.2s ease);
    @include row();
    @include border-radius(3px 3px 0 0);
    @include box-shadow(0px 0px 2px rgba(255,255,255,0.5));
    @include transition(bottom 0.5s ease 1s);
    background: $color-grey-1;
    position:fixed;
    bottom:0;
    padding:0.5em;
    width:90%;
    margin:0 5%;
    color:white;

    ul{
        @include unlist();
    }
    li{
        float:left;
    }

    .actions{
        width:250px;
        margin-right:$grid-gutter-width/2;
    }

    .meta{
        float:right;
        text-align:right;
        padding-right:$grid-gutter-width/2;
        line-height:3.5em;
        font-size:0.85em;

        p{
            margin:0;
            margin-right:$grid-gutter-width;
            white-space: nowrap;
        }
    }
}

// ::-webkit-scrollbar {
//     height: 10px;
//     width: 10px;
//     background: $color-grey-1;
// }
// ::-webkit-scrollbar-thumb {
//     background: $color-grey-2;
//     -webkit-border-radius: 1ex;
// }
// ::-webkit-scrollbar-corner {
//     background: $color-grey-1;
// }

.breadcrumb{
    @include unlist();
}

.breadcrumb{
    @include clearfix();
    overflow:hidden;
    padding-top:1.4em;
    font-size:0.85em;

    li {
        display: block;
        float: left;
        padding: 0.5em 1.3em;
        position: relative;

        text-decoration: none;
        color: #fff;
        line-height:1em;
        white-space: nowrap;

        line-height:1.5em;

        a, span{
            color:lighten($color-teal,40%);
            display:block;
            max-width:12em;
            white-space: nowrap;
            text-overflow:ellipsis;
            overflow:hidden;
            line-height:1.6em;
            padding-right:1em;

            &:after{
                right:0;
                z-index:5;
                position:absolute;
                font-family:wagtail;
                content:"n";
                padding-left:20px;
                font-size:2em;
                color:$color-teal-darker;
                line-height:0.9em;
            }
        }

        &:hover {
            background: $color-teal-dark;
            a{
                color:white;
            }
        }
        &:hover:after {
            border-left-color: $color-teal-dark;
        }

        &.home {
            a {
                padding-right:0;
                text-align:center;
                width:3em;
                font-size:1em;

                &:before{
                    line-height:1em;
                    font-size:1.15rem;
                    line-height: 0.85em;
                    padding-top: 0.10em;
                }
                &:after{
                    right:-0.3em;
                }
            }
        }
    }

    header &  li{
        &:before {
            border-left: 1em solid white;
            position: absolute; left: 0; top: 0;
        }
    }

    &.single{
        li a{
            white-space: nowrap;
            text-overflow:inherit;
            max-width:100%;
        }
    }
}

.clearfix{
    @include clearfix();
}

.row{
    @include clearfix();
}

.nice-padding{
    padding-left:$mobile-nice-padding;
    padding-right:$mobile-nice-padding;
}


/* Z-indexes */
#nav-toggle{
    z-index:5;
}
.nav-wrapper{
    z-index:2;
}
.content-wrapper{
    z-index:3;
}
.nav-submenu{
    z-index:6;
}
footer, .logo{
    z-index:100;
}


@media screen and (min-width: $breakpoint-mobile){
    .col1{
        @include column(1);
    }
    .col2{
        @include column(2);
    }
    .col3{
         @include column(3);
    }
    .col4{
        @include column(4);
    }
    .col5{
        @include column(5);
    }
    .col6{
        @include column(6);
    }
    .col7{
        @include column(7);
    }
    .col8{
        @include column(8);
    }
    .col9{
        @include column(9);
    }
    .col10{
        @include column(10);
    }
    .col11{
        @include column(11);
    }
    .col12{
        @include column(12);
    }

    .divider-before{
        border-left:1px solid $color-grey-4;
    }
    .divider-after{
        border-right:1px solid $color-grey-4;
    }

    .row{
        @include row();
    }
    .row-flush{
        @include row-flush();
    }

    .nice-padding{
        padding-left:$desktop-nice-padding;
        padding-right:$desktop-nice-padding;
    }

    .browsermessage{
        margin:0 0 0 -150px;
    }
    .content-wrapper{
        border-bottom-right-radius: 5px;
    }

    .logo{
        margin:1em auto;
        text-align:center;

        span{
            display:none;
        }
        img{
            width:60px;
            float:none;
            margin:auto;
            display:block;
        }
    }

    footer{
        width:80%;
        margin-left:50px;
    }

    .content{
        border-top:0;
        background-color:none;
        padding-top:0;
    }
    /* END NOT SURE ABOUT THIS */


    .breadcrumb{
        padding-top:0;
        background:$color-teal-darker;

        li {
            a, span{
                &:after{
                    color:$color-teal;
                }
            }
        }
    }

    footer{
        width:80%;
        margin-left:50px;
    }


    /* Z-indexes */
    .nav-main{
        li{
            z-index:1;
        }
        .footer{
            z-index:2;
        }
    }
    .explorer {
        z-index:$explorer-z-index;
    }
    .nav-submenu {
        z-index:$explorer-z-index;
    }
    .nav-wrapper{
        z-index:auto;  /* allows overspill of messages banner onto left menu, but also explorer to spill over main content */
    }
    .nav-wrapper.submenu-active{
        z-index:5;
    }
}

@media screen and (min-width: 90em){
    .wrapper{
        max-width:$breakpoint-desktop-larger;
    }

    footer{
        width:90em;
    }
}

/* Transitions (resolution agnostic) */
.content-wrapper,
.nav-main,
#nav-toggle,
footer,
.logo{
    @include transition(all 0.2s ease);
}
.nav-wrapper{
    @include transition-transform(0.2s ease);
}
.nav-main a, a{
    @include transition(color 0.2s ease, background-color 0.2s ease);
}












// Explorer interface prototype

@-webkit-keyframes tada {
    0% {
        transform: translateX(5%);
        opacity: 0;
    }
    100% {
        transform: translateX(0%);
        opacity: 1;
    }
}


.bn-explorer-container {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;

}


.bn-explorer {
    -webkit-animation: tada .15s ease-out;
    background: #e6e6e6;
    height: 100%;
}


.bn-explorer__header {
    background: $color-teal;
    color: white;
    padding: 1.5em 3em;

    h1 {
        color: #fff;
        margin: 0;
        padding: .3em 0;
    }
}

.bn-explorer__body {
    display: table;
    table-layout: fixed;
    margin-right: -3px;
    height: 100%;

    &:after {
        display: table;
        content: "";
        clear: both;
    }
}

.bn-explorer__overflow {
    width: 100%;
    overflow-x: scroll;
    position: absolute;
    top: 75px;
    bottom: 0;
}

.bn-arrow {
    color: $color-teal-darker;
    display: inline-block;

    &:after {
        content: "n";
        font-family: "wagtail";
    }
}


.bn-column {
    display: table-cell;
    width: 320px;
    min-width: 320px;
    border-right: solid 1px #ccc;
    -webkit-animation: tada .15s ease-out;
    height: 100%;
    overflow: hidden;
}


.bn-column-scroll {
    overflow-y: scroll;
    height: 100%;
}

.bn-add {
    display: none;
    padding: .5em 3em;
    cursor: pointer;
    color: $color-teal-darker;
}

.bn-column:hover .bn-add {
    display: block;
}

.bn-column:hover {
    background: rgba(255,255,255,0.25);
}

.bn-node {
    background: #fff;
    padding: .5em 3em;
    height: 80px;
    border-bottom: solid 1px #ddd;
    cursor: pointer;
}

.bn-node:hover {
    background: #ECFFFF;
    transition: transform .07s ease-out;
    transform-origin: 50% 50%;
}

.bn-node--drag {
    transform: rotateZ(-1deg) translateY(-5px);
    box-shadow: 0px 5px 5px rgba(0,0,0,0.1);
    border-bottom-color: #aaa;
}

.bn-node--active {
    // background: #4B5B61;
    background: #555;
    color: #fff;
    &:hover {
        background: #5a5a5a;
    }
}

.bn-active {
    background: #1a1a1a;
}
